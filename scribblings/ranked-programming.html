<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Ranked Programming</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Ranked Programming</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Reference%29" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Ranked_.Programming%29" class="tocsubseclink" data-pltdoc="x">Ranked Programming</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Reference%29" class="tocsubseclink" data-pltdoc="x">Reference</a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">nrm/<span class="mywbr"> &nbsp;</span>exc</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">either/<span class="mywbr"> &nbsp;</span>or</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._either-of%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">either-<wbr></wbr>of</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">!</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._construct-ranking%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">construct-<wbr></wbr>ranking</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rank-<wbr></wbr>of</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._failure%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">failure</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">observe</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">$</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">rlet</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">rlet*</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-equal~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rf-<wbr></wbr>equal?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3ehash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rf-<wbr></wbr>&gt;hash</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3eassoc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rf-<wbr></wbr>&gt;assoc</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3estream%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rf-<wbr></wbr>&gt;stream</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pr-<wbr></wbr>all</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-first%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pr-<wbr></wbr>first</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-until%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pr-<wbr></wbr>until</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pr</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-l%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">observe-<wbr></wbr>l</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-j%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">observe-<wbr></wbr>j</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._cut%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">cut</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._limit%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">limit</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rank?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">ranking?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rank/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">ranking/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">7.3</span></div><h2><a name="(part._.Ranked_.Programming)"></a><a name="(mod-path._ranked-programming)"></a>Ranked Programming</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Tjitze Rienstra</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">ranked-programming</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/ranked-programming" title="Install this package using `raco pkg install ranked-programming`"><span class="stt">ranked-programming</span></a></span></td></tr></table></p><h3>1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>The <span class="RktSym">ranked-programming</span> package implements ranked programming functionality for the Racket programming language.
For background and general introduction on ranked programming please read
<a href="https://github.com/tjitze/ranked-programming/blob/master/documentation/ranked_programming.pdf">this paper</a> (to be presented at IJCAI 2019).</p><p>A quick-start guide can be found <a href="https://github.com/tjitze/ranked-programming/blob/master/README.md">here</a>.
This document contains a complete reference of the functionality provided by this library.</p><p>Before using this reference, the reader should be familiar with the paper linked to above.
There are a few minor differences between the language described in the paper and the language implemented here,
  as well as a number of additional features not discussed in the paper.
We list them here:</p><p><span style="font-weight: bold">Ranked Choice</span></p><p>The syntax of the <span style="font-style: italic">ranked choice</span> expression discussed in the paper is</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(nrm K1 exc R K2)</span></p></td></tr></table></p><p>The ranked choice expression implemented by this library uses a different syntax:</p><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktSym">K1</span><span class="stt"> </span><span class="RktSym">K2</span><span class="stt"> </span><span class="RktSym">R</span><span class="RktPn">)</span>.</p><p><span style="font-weight: bold">Either/Or</span></p><p>The syntax of the <span style="font-style: italic">either/or</span> expression discussed in the paper is</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(either K1 or K2)</span></p></td></tr></table></p><p>The either/or expression implemented by this library uses a different syntax:</p><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxLink" data-pltdoc="x">either/or</a></span><span class="stt"> </span><span class="RktSym">K1</span><span class="stt"> </span><span class="RktSym">K2</span><span class="RktPn">)</span>.</p><p><span style="font-weight: bold">Truth expressions</span></p><p>The <span style="font-style: italic">truth expression</span> <span class="RktSym">!x</span> described in the paper is implemented by the procedure <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span>.
   This means that we must enclose these expressions in parantheses.
   Thus, instead of writing</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(nrm/exc !"foo" !"bar" 1)</span></p></td></tr></table></p><p>like in the paper, we have to write</p><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"foo"</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></p><p><span style="font-weight: bold">However</span>, all expressions with parameters of type ranking are implemented
     so that these parameters also accept values of any other type.
   Such values are implicitly converted to rankings using <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span>.
   Therefore, the <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span> procedure is actually redundant, because instead of <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"foo"</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> we can simply write</p><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">"foo"</span><span class="stt"> </span><span class="RktVal">"bar"</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></p><p>where <span class="RktVal">"foo"</span> and <span class="RktVal">"bar"</span> are implicitly converted to <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"foo"</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="stt"> </span><span class="RktVal">"bar"</span><span class="RktPn">)</span>,
   since they appear as arguments to parameters of type ranking.</p><p><span style="font-weight: bold">Displaying Ranking Functions</span></p><p>In this text, ranking functions returned by expressions are referred to simply as <span style="font-style: italic">rankings</span>.
   They encode sets of possible return values of an expression, associated with degrees of surprise:
     0 for not surprising, 1 for surprising, 2 for even more surprising, and so on.
   These rankings are represented by lazily-linked list data structures, as discussed in section 4 in the
     <a href="https://github.com/tjitze/ranked-programming/blob/master/documentation/ranked_programming.pdf">paper</a>.
   In order to display a ranking, we need to provide it as an argument to one of the print functions implemented by this library.
   The standard print function is <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span>.
   Thus, instead of evaluating an expression like <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">"foo"</span><span class="stt"> </span><span class="RktVal">"bar"</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> directly, we must evaluate it as follows.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"foo"</span><span class="hspace">&nbsp;</span><span class="RktVal">"bar"</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">foo</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bar</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p>Alternatives to <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span> are <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="RktValLink" data-pltdoc="x">pr-all</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-until%29%29" class="RktValLink" data-pltdoc="x">pr-until</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-first%29%29" class="RktValLink" data-pltdoc="x">pr-first</a></span> (see reference for details).</p><p><span style="font-weight: bold">Doing other things with rankings</span></p><p>Apart from displaying a ranking, we can also convert it to some other, more manageable, representation.
   For this, we can use the <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3ehash%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;hash</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3eassoc%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;assoc</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3estream%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;stream</a></span> functions,
     which convert a ranking to, respectively, a hash table, an association list, or a stream.
   The <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._cut%29%29" class="RktValLink" data-pltdoc="x">cut</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._limit%29%29" class="RktValLink" data-pltdoc="x">limit</a></span> procedures may also be of use in combination with these functions.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3eassoc%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;assoc</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"foo"</span><span class="hspace">&nbsp;</span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(("foo" . 0) ("bar" . 1))</span></p></td></tr></table></blockquote></div></p><p><span style="font-weight: bold">Additional functions and expression types</span></p><p>This library implements all functions and expression types discussed in the paper.
   These are the
     truth function (<span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span>),
     ranked choice expression (<span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span>),
     the either/or syntactic shortcut (<span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxLink" data-pltdoc="x">either/or</a></span>),
     observation function (<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span>),
     ranked procedure call function (<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span>),
     and ranked <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span> expression (<span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span>).</p><p>This library implements a number of additional functions and expression types:</p><ul><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._either-of%29%29" class="RktValLink" data-pltdoc="x">either-of</a></span> Choose elements from a list (all equally surprising).</p></li><li><p><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._construct-ranking%29%29" class="RktStxLink" data-pltdoc="x">construct-ranking</a></span> Construct ranking from an association list.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="RktValLink" data-pltdoc="x">rank-of</a></span> Return rank of a predicate according to a given ranking.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._failure%29%29" class="RktValLink" data-pltdoc="x">failure</a></span> Returns the empty ranking.</p></li><li><p><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> Generalises <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span>, like <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span> generalises <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span>.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-equal~3f%29%29" class="RktValLink" data-pltdoc="x">rf-equal?</a></span> Check if two rankings are equivalent.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3ehash%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;hash</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3eassoc%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;assoc</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3estream%29%29" class="RktValLink" data-pltdoc="x">rf-&gt;stream</a></span> Convert ranking to other data structure.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="RktValLink" data-pltdoc="x">pr-all</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-first%29%29" class="RktValLink" data-pltdoc="x">pr-first</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-until%29%29" class="RktValLink" data-pltdoc="x">pr-until</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span> Procedures for displaying a ranking.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-l%29%29" class="RktValLink" data-pltdoc="x">observe-l</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-j%29%29" class="RktValLink" data-pltdoc="x">observe-j</a></span> Special <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span> variants.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._cut%29%29" class="RktValLink" data-pltdoc="x">cut</a></span> Restrict ranking up to a given rank.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._limit%29%29" class="RktValLink" data-pltdoc="x">limit</a></span> Restrict ranking up to a given number of values.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span> Type checking for ranks and rankings.</p></li><li><p><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank%2Fc%29%29" class="RktValLink" data-pltdoc="x">rank/c</a></span>/<span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span> Type contracts for ranks and rankings.</p></li></ul><p>These are all described in detail in this reference.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Reference)"></a>Reference</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._nrm/exc))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">nrm/exc</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span><span class="RktVar">k_2</span><span class="hspace">&nbsp;</span><span class="RktVar">rank</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span><span class="RktVar">k_2</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">k_1</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">k_2</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">rank</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><span style="font-style: italic">Normally</span> returns the value captured by <span class="RktVar">k_1</span> and <span style="font-style: italic">exceptionally</span> (with degree of surprise <span class="RktVar">rank</span>)
 the value captured by <span class="RktVar">k_2</span>.
If <span class="RktVar">rank</span> is omitted, it defaults to 1.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"foo"</span><span class="hspace">&nbsp;</span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">foo</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bar</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"foo"</span><span class="hspace">&nbsp;</span><span class="RktVal">"bar"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">foo</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bar</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>If <span class="RktVar">k_1</span> and <span class="RktVar">k_2</span> are rankings then <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVar">k_1</span><span class="stt"> </span><span class="RktVar">k_2</span><span class="stt"> </span><span class="RktVar">rank</span><span class="RktPn">)</span> returns a ranking
  according to which the rank of a value <span class="RktSym">v</span> is the minimum among
  the rank of <span class="RktSym">v</span> according to the ranking <span class="RktVar">k_1</span>,
  and the rank of <span class="RktSym">v</span> according to the ranking <span class="RktVar">k_2</span> <span style="font-weight: bold">plus the value of</span> <span class="RktVar">rank</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"foo"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"bar"</span><span class="hspace">&nbsp;</span><span class="RktVal">"baz"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">foo</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bar</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">baz</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p>Both <span class="RktVar">k_1</span> and <span class="RktVar">k_2</span> are evaluated on an as-needed basis. This means that
<span class="RktVar">k_1</span> is evaluated only after the ranking that is returned is consulted for the first time,
  and <span class="RktVar">k_2</span> only after it is consulted beyond rank <span class="RktVar">rank</span>.
This <span style="font-style: italic">lazy evaluation</span> scheme avoids needless calculations and provides the ability
  to define potentially infinite rankings.</p><p>Below is an example of an infinite ranking.
The expression <span class="RktPn">(</span><span class="RktSym">recur</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span> normally returns <span class="RktSym">x</span> and exceptionally <span class="RktPn">(</span><span class="RktSym">recur</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="stt"> </span><span class="RktSym">x</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span>.
Even though <span class="RktSym">recur</span> is infinitely recursive, it does return a ranking, which is due to the lazy evaluation.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">1</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">2</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">4</span></p></td></tr><tr><td><p><span class="RktOut">3 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">8</span></p></td></tr><tr><td><p><span class="RktOut">4 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">16</span></p></td></tr><tr><td><p><span class="RktOut">5 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">32</span></p></td></tr><tr><td><p><span class="RktOut">6 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">64</span></p></td></tr><tr><td><p><span class="RktOut">7 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">128</span></p></td></tr><tr><td><p><span class="RktOut">8 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">256</span></p></td></tr><tr><td><p><span class="RktOut">9 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">512</span></p></td></tr><tr><td><p><span class="RktOut">...</span></p></td></tr></table></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._either/or))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">either/or</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">k_n</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a ranking according to which <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> all equally surprising.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"peter"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxLink" data-pltdoc="x">either/or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"ann"</span><span class="hspace">&nbsp;</span><span class="RktVal">"bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"charlie"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">peter</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ann</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bob</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">charlie</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>If <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> are rankings, then <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxLink" data-pltdoc="x">either/or</a></span><span class="stt"> </span><span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span><span class="RktPn">)</span> returns a ranking
 according to which the rank of a value <span class="RktSym">v</span> is the minimum among
  the ranks of <span class="RktSym">v</span> according to the rankings <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span>.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._either%2For%29%29" class="RktStxLink" data-pltdoc="x">either/or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"peter"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ann"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"charly"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">peter</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">bob</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ann</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">charly</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._either-of))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._either-of%29%29" class="RktValDef RktValLink" data-pltdoc="x">either-of</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">lst</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list~3f%29%29" class="RktValLink" data-pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a ranking according to which all elements of <span class="RktVar">lst</span> are equally surprising.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">weekdays</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">"mon"</span><span class="hspace">&nbsp;</span><span class="RktVal">"tue"</span><span class="hspace">&nbsp;</span><span class="RktVal">"wed"</span><span class="hspace">&nbsp;</span><span class="RktVal">"thu"</span><span class="hspace">&nbsp;</span><span class="RktVal">"fri"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">weekend</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">"sat"</span><span class="hspace">&nbsp;</span><span class="RktVal">"sun"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._either-of%29%29" class="RktValLink" data-pltdoc="x">either-of</a></span><span class="hspace">&nbsp;</span><span class="RktSym">weekdays</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._either-of%29%29" class="RktValLink" data-pltdoc="x">either-of</a></span><span class="hspace">&nbsp;</span><span class="RktSym">weekend</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">mon</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">tue</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">wed</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">thu</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">fri</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">sat</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">sun</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._!))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a ranking according to which <span class="RktVar">v</span> is ranked 0 and anything else ranked infinity.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">5</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>This function (called the <span style="font-style: italic">Truth function</span> in the paper) is included for the sake of completeness
but is actually redundant. This is because all expressions provided by this library with parameters of
type ranking are implemented so that these parameters also accept values of any other type. Such values
are implicitly converted to rankings using <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._%21%29%29" class="RktStxLink" data-pltdoc="x">!</a></span>. See discussion in the introduction.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._construct-ranking))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._construct-ranking%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">construct-ranking</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">v_1</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">r_1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">v_n</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">r_n</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a ranking from an association list.
The values <span class="RktVar">v_1</span> ... <span class="RktVar">v_n</span> are returned with ranks <span class="RktVar">r_1</span> ... <span class="RktVar">r_n</span>.
Rank <span class="RktVar">r_1</span> must be 0, and <span class="RktVar">r_1</span> ... <span class="RktVar">r_n</span> must be sorted in non-decreasing order.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._construct-ranking%29%29" class="RktStxLink" data-pltdoc="x">construct-ranking</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"x"</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"z"</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">x</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">y</span></p></td></tr><tr><td><p><span class="RktOut">5 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">z</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rank-of))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="RktValDef RktValLink" data-pltdoc="x">rank-of</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/function-contracts.html#%28form._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the rank of the predicate <span class="RktVar">pred</span> according to the ranking <span class="RktVar">k</span>.
This value represents the degree of surprise that <span class="RktVar">pred</span> holds according to <span class="RktVar">k</span>.
It is the rank of the lowest-ranked value for which <span class="RktVar">pred</span> returns <span class="RktVal">#t</span>.</div></p><p>If <span class="RktVar">pred</span> does not return <span class="RktVal">#t</span> for some finitely-ranked value,
   and <span class="RktVar">k</span> is infinite (i.e., assigns finite ranks to infinitely many values)
   then <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="RktValLink" data-pltdoc="x">rank-of</a></span> does not terminate.</p><p>The following example determines the degree of surprise that <span class="RktPn">(</span><span class="RktSym">recur</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> returns a value higher than 500.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="RktValLink" data-pltdoc="x">rank-of</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">500</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">9</span></p></td></tr></table></blockquote><p>The ranking <span class="RktVar">k</span> is consulted as much as necessary but no more.
More precisely, <span class="RktVar">k</span> is consulted until a value for which <span class="RktVar">pred</span> returns <span class="RktVal">#t</span> is encountered.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._failure))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._failure%29%29" class="RktValDef RktValLink" data-pltdoc="x">failure</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns an empty ranking.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._observe))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValDef RktValLink" data-pltdoc="x">observe</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/function-contracts.html#%28form._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the ranking <span class="RktVar">k</span> conditionalized on the predicate <span class="RktVar">pred</span>.
This is the ranking-theoretic conditionalization operation,
  which is the ranking-based analogue of the probabilistic contitionalization operation.</div></p><p><div class="SIntrapara">The ranking returned by the expression <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span><span class="stt"> </span><span class="RktVar">pred</span><span class="stt"> </span><span class="RktVar">k</span><span class="RktPn">)</span> is determined by the following rule:
Suppose <span class="RktVar">k</span> assigns a finite rank <span class="RktSym">r</span> to the value <span class="RktSym">v</span>. Then:
</div><div class="SIntrapara"><ul><li><p>if <span class="RktPn">(</span><span class="RktVar">pred</span><span class="stt"> </span><span class="RktSym">v</span><span class="RktPn">)</span> returns <span class="RktVal">#f</span> then <span class="RktSym">v</span> is discarded (or returned with rank infinity).</p></li><li><p>if <span class="RktPn">(</span><span class="RktVar">pred</span><span class="stt"> </span><span class="RktSym">v</span><span class="RktPn">)</span> returns <span class="RktVal">#t</span> then <span class="RktSym">v</span> is returned with rank <span class="RktSym">r</span> minus <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank-of%29%29" class="RktValLink" data-pltdoc="x">rank-of</a></span><span class="stt"> </span><span class="RktVar">pred</span><span class="stt"> </span><span class="RktVar">k</span><span class="RktPn">)</span>.</p></li></ul></div></p><p>In the following example we determine the ranking returned by <span class="RktPn">(</span><span class="RktSym">recur</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> given that
we observe that the value that is returned is higher than 500.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">500</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">512</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">1024</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">2048</span></p></td></tr><tr><td><p><span class="RktOut">3 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">4096</span></p></td></tr><tr><td><p><span class="RktOut">4 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">8192</span></p></td></tr><tr><td><p><span class="RktOut">5 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">16384</span></p></td></tr><tr><td><p><span class="RktOut">6 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">32768</span></p></td></tr><tr><td><p><span class="RktOut">7 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">65536</span></p></td></tr><tr><td><p><span class="RktOut">8 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">131072</span></p></td></tr><tr><td><p><span class="RktOut">9 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">262144</span></p></td></tr><tr><td><p><span class="RktOut">...</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._~24))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValDef RktValLink" data-pltdoc="x">$</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">k_n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k_n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the result of applying the procedure <span class="RktVar">k_1</span> to the arguments <span class="RktSym">k_2</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span>.</div></p><p>The precise rule that is used to construct the ranking returned by the expression <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span><span class="stt"> </span><span class="RktVar">k_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span><span class="RktPn">)</span> is as follows:
Suppose that the rankings <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> assign ranks <span class="RktSym">r_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">r_n</span> to the values <span class="RktSym">v_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">v_n</span>.
Furthermore suppose that the standard procedure call <span class="RktPn">(</span><span class="RktSym">v_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">v_n</span><span class="RktPn">)</span> returns <span class="RktSym">v</span>.
Then <span class="RktSym">v</span> is returned with rank <span class="RktSym">r_1</span>+...+<span class="RktSym">r_n</span>,
    unless there is another sequence of values that yields a lower rank for <span class="RktSym">v</span> using the same rule.</p><p>If an argument for a parameter <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> is not a ranking,
  then it is interpreted as a ranking according to which the
  given argument receives rank 0, and all other values rank infinity.
This is demonstrated by the following example.</p><p>Consider the procedure call <span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">5</span><span class="stt"> </span><span class="RktVal">10</span><span class="RktPn">)</span>.
The ranked version of this is <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span><span class="stt"> </span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">5</span><span class="stt"> </span><span class="RktVal">10</span><span class="RktPn">)</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">15</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p>Now suppose we are uncertain about the argument <span class="RktVal">10</span>:
 this value is normally <span class="RktVal">10</span> and exceptionally <span class="RktVal">20</span>.
To express this we replace <span class="RktVal">10</span> with <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">10</span><span class="stt"> </span><span class="RktVal">20</span><span class="RktPn">)</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">15</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">25</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p>Now we add uncertainty about the operation: we normally add but exceptionally multiply:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._~24%29%29" class="RktValLink" data-pltdoc="x">$</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">15</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">25</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">50</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">100</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._rlet))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">rlet</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">var_1</span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVar">var_n</span><span class="hspace">&nbsp;</span><span class="RktVar">k_n</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> expression generalises Racket&rsquo;s standard <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> expression.
Like in the standard <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> expression, <span class="RktVar">var_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">var_n</span> are variables,
  and <span class="RktVar">body</span> is an expression in which these variables may occur.
The difference with the standard <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> expression is that the <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> parameters expect arguments of type ranking.</div></p><p>The precise rule that is used to construct the ranking returned by the expression <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">var_1</span><span class="stt"> </span><span class="RktVar">k_1</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">var_n</span><span class="stt"> </span><span class="RktVar">k_n</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">body</span><span class="RktPn">)</span> is as follows:
Suppose that the rankings <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> assign ranks <span class="RktSym">r_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">r_n</span> to the values <span class="RktSym">v_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">v_n</span>.
Furthermore, suppose that <span class="RktVar">body</span>, with occurrences of <span class="RktVar">var_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">var_n</span> replaced with <span class="RktSym">v_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">v_n</span>, returns <span class="RktSym">v</span>.
Then <span class="RktSym">v</span> is returned with rank <span class="RktSym">r_1</span>+...+<span class="RktSym">r_n</span>,
  unless there is another sequence of values that yields a lower rank for <span class="RktSym">v</span> using the same rule.</p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> expression provides a convenient way to construct a joint ranking over a set of independent variables.
An example: let <span class="RktSym">b</span> and <span class="RktSym">p</span> be boolean variables standing for beer and peanuts.
We only exceptionally drink beer, and thus <span class="RktSym">b</span> becomes <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span>.
Furthermore, we normally eat peanuts, and thus <span class="RktSym">b</span> becomes <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktVal">"beer"</span><span class="hspace">&nbsp;</span><span class="RktVal">"no beer"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">" and "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"peanuts"</span><span class="hspace">&nbsp;</span><span class="RktVal">"no peanuts"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">no beer and peanuts</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">no beer and no peanuts</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">beer and peanuts</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">beer and no peanuts</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p>One may wish to express dependencies between variables.
In the example above, we might wish to express that our peanut consumption depends on whether we drink beer.
However, this cannot be done, since the argument for <span class="RktSym">p</span> cannot refer to the value of <span class="RktSym">b</span>.
The <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span> expression extends the <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> expression and provides a solution for such cases.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ranked-programming/main..rkt)._rlet*))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">rlet*</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">var_1</span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVar">var_n</span><span class="hspace">&nbsp;</span><span class="RktVar">k_n</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span> expression generalises Racket&rsquo;s standard <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span> expression
  in a way similar to how <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> generalises <span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span>.</div></p><p>The rule used to determine the ranking that is returned is the same as that of <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span>,
  except that the expressions used as arguments for <span class="RktVar">k_1</span><span class="stt"> </span><span class="RktMeta"><a href="file:///Applications/Racket%20v7.3/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">k_n</span> may refer to the preceding variables.
This provides a convenient way to construct a joint ranking over a list of variables,
where each variable may depend on the preceding variables.</p><p>An example: let <span class="RktSym">b</span> and <span class="RktSym">p</span> be boolean variables standing for "beer" and "peanuts".
Like before, we only exceptionally drink beer, and thus <span class="RktSym">b</span> becomes <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span>.
However, this time our peanut consumption depends on whether we drink beer:
  if we do, we normally have peanuts, and otherwise we don&rsquo;t.
Thus, <span class="RktSym">p</span> becomes <span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="stt"> </span><span class="RktSym">b</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span>.
Note that this expression refers to <span class="RktSym">b</span>,
  which would not be allowed if we used <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%29%29" class="RktStxLink" data-pltdoc="x">rlet</a></span> instead of <span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValLink" data-pltdoc="x">pr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._rlet%2A%29%29" class="RktStxLink" data-pltdoc="x">rlet*</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._ranked-programming%2Fmain..rkt%29._nrm%2Fexc%29%29" class="RktStxLink" data-pltdoc="x">nrm/exc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktVal">"beer"</span><span class="hspace">&nbsp;</span><span class="RktVal">"no beer"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">" and "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"peanuts"</span><span class="hspace">&nbsp;</span><span class="RktVal">"no peanuts"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Rank</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">Value</span></p></td></tr><tr><td><p><span class="RktOut">------------</span></p></td></tr><tr><td><p><span class="RktOut">0 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">no beer and no peanuts</span></p></td></tr><tr><td><p><span class="RktOut">1 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">beer and peanuts</span></p></td></tr><tr><td><p><span class="RktOut">2 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">beer and no peanuts</span></p></td></tr><tr><td><p><span class="RktOut">Done</span></p></td></tr></table></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rf-equal~3f))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-equal~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">rf-equal?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span><span class="RktVar">k_2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k_1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k_2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">k_1</span> and <span class="RktVar">k_2</span> are equivalent rankings, and <span class="RktVal">#f</span> otherwise.
Two rankings are equivalent if they assign the same rank to each finitely-ranked value.
This means that the order in which values with the same rank are returned is irrelevant.
This procedure will not terminate if <span class="RktVar">k_1</span> and <span class="RktVar">k_2</span> are infinite rankings
  (i.e., assign finite ranks to infinitely many values).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rf-~3ehash))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3ehash%29%29" class="RktValDef RktValLink" data-pltdoc="x">rf-&gt;hash</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/hashtables.html#%28def._%28%28quote._~23~25kernel%29._hash~3f%29%29" class="RktValLink" data-pltdoc="x">hash?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Converts the ranking <span class="RktVar">k</span> to a
 <a href="https://docs.racket-lang.org/guide/hash-tables.html">hash table</a> that maps each finitely ranked value to its rank.
This procedure will not terminate if <span class="RktVar">k</span> is an infinite ranking
  (i.e., assigns finite ranks to infinitely many values).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rf-~3eassoc))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3eassoc%29%29" class="RktValDef RktValLink" data-pltdoc="x">rf-&gt;assoc</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list~3f%29%29" class="RktValLink" data-pltdoc="x">list?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Converts the ranking <span class="RktVar">k</span> to an association list,
  which is a list consisting of pairs <span class="RktPn">(</span><span class="RktSym">v</span><span class="stt"> </span><span class="RktPn">. </span><span class="RktSym">r</span><span class="RktPn">)</span>
  for each finitely ranked value <span class="RktSym">v</span> and rank <span class="RktSym">r</span>.
These pairs appear in non-decreasing order with respect to rank.
If <span class="RktVar">k</span> is an infinite ranking (i.e., assigns finite ranks to infinitely many values) this function will not terminate.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rf-~3estream))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rf-~3estream%29%29" class="RktValDef RktValLink" data-pltdoc="x">rf-&gt;stream</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/streams.html#%28def._%28%28lib._racket%2Fstream..rkt%29._stream~3f%29%29" class="RktValLink" data-pltdoc="x">stream?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Converts the ranking <span class="RktVar">k</span> to a stream that generates pairs <span class="RktPn">(</span><span class="RktSym">value</span><span class="stt"> </span><span class="RktPn">. </span><span class="RktSym">rank</span><span class="RktPn">)</span>
  for each finitely ranked value and its rank (see <span class="RktSym">racket/stream</span>).
These pairs are generated in non-decreasing order with respect to rank.
The ranking <span class="RktVar">k</span> will be consulted one value at a time, as the stream is consumed.
If <span class="RktVar">k</span> is an infinite ranking (i.e., assigns finite ranks to infinitely many values) then this function returns an infinite stream.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._pr-all))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="RktValDef RktValLink" data-pltdoc="x">pr-all</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Displays the complete ranking <span class="RktVar">k</span> in tabular form and in non-decreasing order with respect to rank.
If <span class="RktVar">k</span> is an infinite ranking (i.e., assigns finite ranks to infinitely many values) this function will not terminate.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._pr-first))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-first%29%29" class="RktValDef RktValLink" data-pltdoc="x">pr-first</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._natural-number%2Fc%29%29" class="RktValLink" data-pltdoc="x">natural-number/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="RktValLink" data-pltdoc="x">pr-all</a></span> but only displays the <span class="RktVar">n</span> lowest-ranked values.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._pr-until))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-until%29%29" class="RktValDef RktValLink" data-pltdoc="x">pr-until</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._natural-number%2Fc%29%29" class="RktValLink" data-pltdoc="x">natural-number/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-all%29%29" class="RktValLink" data-pltdoc="x">pr-all</a></span> but only displays values up to rank <span class="RktVar">rank</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._pr))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr%29%29" class="RktValDef RktValLink" data-pltdoc="x">pr</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValLink" data-pltdoc="x">ranking/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Displayes the 10 lowest-ranked values of the ranking <span class="RktVar">k</span>.
Short for <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._pr-first%29%29" class="RktValLink" data-pltdoc="x">pr-first</a></span><span class="stt"> </span><span class="RktVal">10</span><span class="stt"> </span><span class="RktVar">k</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._observe-l))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-l%29%29" class="RktValDef RktValLink" data-pltdoc="x">observe-l</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/function-contracts.html#%28form._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span> but implements the more general <span style="font-style: italic">L-conditionalization</span> operation, where <span class="RktVar">rank</span> is the extra evidence strength parameter.
This operation is discussed <a href="https://www.researchgate.net/profile/Moises_Goldszmidt/publication/221393230_Rank-based_Systems_A_Simple_Approach_to_Belief_Revision_Belief_Update_and_Reasoning_about_Evidence_and_Actions/links/546e06130cf29806ec2e6cda/Rank-based-Systems-A-Simple-Approach-to-Belief-Revision-Belief-Update-and-Reasoning-about-Evidence-and-Actions.pdf
">here</a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._observe-j))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe-j%29%29" class="RktValDef RktValLink" data-pltdoc="x">observe-j</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/function-contracts.html#%28form._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._observe%29%29" class="RktValLink" data-pltdoc="x">observe</a></span> but implements the more general <span style="font-style: italic">J-conditionalization</span> operation, where <span class="RktVar">rank</span> is the extra evidence strength parameter.
This operation is discussed <a href="https://www.researchgate.net/profile/Moises_Goldszmidt/publication/221393230_Rank-based_Systems_A_Simple_Approach_to_Belief_Revision_Belief_Update_and_Reasoning_about_Evidence_and_Actions/links/546e06130cf29806ec2e6cda/Rank-based-Systems-A-Simple-Approach-to-Belief-Revision-Belief-Update-and-Reasoning-about-Evidence-and-Actions.pdf
">here</a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._cut))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._cut%29%29" class="RktValDef RktValLink" data-pltdoc="x">cut</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rank</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the ranking <span class="RktVar">k</span> restricted to values with a rank of at most <span class="RktVar">rank</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._limit))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._limit%29%29" class="RktValDef RktValLink" data-pltdoc="x">limit</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">count</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">count</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValLink" data-pltdoc="x">rank?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValLink" data-pltdoc="x">ranking?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the ranking <span class="RktVar">k</span> restricted to the <span class="RktVar">count</span> lowest-ranked values.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._rank~3f))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">rank?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">x</span> is a rank (a non-negative integer or infinity) and <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ranked-programming/main..rkt)._ranking~3f))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">ranking?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">x</span> is a ranking and <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._ranked-programming/main..rkt)._rank/c))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._rank%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">rank/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/contract-utilities.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fguts..rkt%29._flat-contract~3f%29%29" class="RktValLink" data-pltdoc="x">flat-contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A contract for ranks (non-negative integers or infinity).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._ranked-programming/main..rkt)._ranking/c))"></a><span title="Provided from: ranked-programming | Package: ranked-programming"><span class="RktSym"><a href="#%28def._%28%28lib._ranked-programming%2Fmain..rkt%29._ranking%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">ranking/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Racket%20v7.3/doc/reference/contract-utilities.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fguts..rkt%29._flat-contract~3f%29%29" class="RktValLink" data-pltdoc="x">flat-contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A contract for rankings.</div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>